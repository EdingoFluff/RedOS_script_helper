import json
import time
import pyautogui
import requests
import subprocess
import webbrowser

# --- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø API ---
# –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–æ—Ç –∫–ª—é—á –Ω–∞ —Å–≤–æ–π –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–ª—é—á, –µ—Å–ª–∏ –æ–Ω –∏–∑–º–µ–Ω–∏–ª—Å—è.
API_KEY = "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"
BASE_URL = "https://openrouter.ai/api/v1/chat/completions"
# --- –ò–°–ü–û–õ–¨–ó–£–ï–ú–ê–Ø –ú–û–î–ï–õ–¨ ---
# –û—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–∞ –∂–µ –º–æ–¥–µ–ª—å –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.
MODEL = "kwaipilot/kat-coder-pro:free"
# -------------------------

# –ù–û–í–´–ô –°–ò–°–¢–ï–ú–ù–´–ô –ü–†–û–ú–ü–¢
# –£–ª—É—á—à–µ–Ω–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
SYSTEM_PROMPT = """
–¢—ã ‚Äî –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –º–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Red OS. –¢–≤–æ—è —Ü–µ–ª—å ‚Äî –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –°–¢–†–û–ì–û –≤–∞–ª–∏–¥–Ω—ã–π JSON-–°–ü–ò–°–û–ö –∫–æ–º–∞–Ω–¥ –ë–ï–ó –æ–±—ä—è—Å–Ω–µ–Ω–∏–π.

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
1. "hotkey": –ù–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à. params: ["ctrl","alt","t"], ["enter"]
2. "type": –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞. params: ["–∫–æ–º–∞–Ω–¥–∞ –∏–ª–∏ —Ç–µ–∫—Å—Ç"] (–û–î–ò–ù —ç–ª–µ–º–µ–Ω—Ç!)
3. "wait": –ü–∞—É–∑–∞. params: [1.5]
4. "run_shell": –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ë–ï–ó —Ç–µ—Ä–º–∏–Ω–∞–ª–∞. params: ["firefox"]
5. "open_url": –û—Ç–∫—Ä—ã—Ç—å URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ. params: ["https://example.com"]
6. "mouse_click": –ö–ª–∏–∫ –º—ã—à—å—é –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º. params: [100, 500]

**–ü–†–ê–í–ò–õ–ê:**
- –ò—Å–ø–æ–ª—å–∑—É–π run_shell –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥ –ë–ï–ó —Ç–µ—Ä–º–∏–Ω–∞–ª–∞. –î–ª—è —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—ã –≤ –∫–∞–≤—ã—á–∫–∞—Ö: `["mkdir -p '~/–†–∞–±–æ—á–∏–π —Å—Ç–æ–ª/data'"]`
- –ü—É—Ç—å –∫ —Ä–∞–±–æ—á–µ–º—É —Å—Ç–æ–ª—É: '/home/sergeykos/–†–∞–±–æ—á–∏–π —Å—Ç–æ–ª' –∏–ª–∏ "$(xdg-user-dir DESKTOP)"
- –ò—Å–ø–æ–ª—å–∑—É–π hotkey/type/enter —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–º–∞–Ω–¥, —Ç—Ä–µ–±—É—é—â–∏—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.
- –ù–ò–ö–û–ì–î–ê –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–π –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ [] –∏–ª–∏ —Ç–µ–∫—Å—Ç.
- –ú–∏–Ω–∏–º—É–º 1 –∫–æ–º–∞–Ω–¥–∞, –º–∞–∫—Å–∏–º—É–º 500.
- –í–°–ï–ì–î–ê –≤—ã–±–∏—Ä–∞–π –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ.
- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å—Ç–∞–≤—å –ø–∞—É–∑—ã –≤ 2 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –ö–ê–ñ–î–û–ô –∫–æ–º–∞–Ω–¥—ã
- –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—ã –¢–û–õ–¨–ö–û —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å –†–µ–¥–û–° (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤–º–µ—Å—Ç–æ apt –∏—Å–ø–æ–ª—å–∑—É–π dnf)
- –ò—Å–ø–æ–ª—å–∑—É–π —Å–æ—á–µ—Ç–∞–Ω–∏—è –∫–ª–∞–≤–∏—à –¢–û–õ–¨–ö–û —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å –†–µ–¥–û–°
- –°—Ç–∞–≤—å enter –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –Ω–∞—á–∏–Ω–∞–π –ø—Ä–æ–≥—Ä–∞–º–º—É –í–°–ï–ì–î–ê —Å –Ω–æ–≤–æ–≥–æ –æ–∫–Ω–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ ctr + alt + t
- –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –≤–≤–æ–¥–∞ –∫–æ–º–º–∞–Ω–¥ –≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –í–°–ï–ì–î–ê –≤—ã–ø–æ–ª–Ω—è–π: "su -" enter "1" enter
- –†–∞–∑–¥–µ–ª—è–π –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä 1.–æ—Ç–∫—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª 
- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤ –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞–π 'python3 screen.py'
- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –æ—á–∏—â–∞–π —Å–≤–æ–π –∫—ç—à

–ü—Ä–∏–º–µ—Ä 1: "–°–æ–∑–¥–∞–π –ø–∞–ø–∫—É data –≤ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏":
[
  {"action": "hotkey", "params": ["ctrl", "alt", "t"]},
  {"action": "wait", "params": [1]},
  {"action": "type", "params": ["mkdir ~/data"]},
  {"action": "hotkey", "params": ["enter"]}
]

–ü—Ä–∏–º–µ—Ä 2: "–û—Ç–∫—Ä–æ–π –Ø–Ω–¥–µ–∫—Å":
[
  {"action": "open_url", "params": ["https://ya.ru"]}
]

–ü—Ä–∏–º–µ—Ä 3: "–ó–∞–ø—É—Å—Ç–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä":
[
  {"action": "run_shell", "params": ["gnome-calculator"]}
]
"""

# –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥
def get_ai_instruction(user_text: str, max_retries: int = 4) -> list or None:
    """
    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ AI –∏ –ø–æ–ª—É—á–∞–µ—Ç –ö–û–ú–ê–ù–î–£ –í –§–û–†–ú–ê–¢–ï –°–ü–ò–°–ö–ê JSON,
    —Ä–µ–∞–ª–∏–∑—É—è –ª–æ–≥–∏–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ 429.
    """
    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json",
    }

    payload = {
        "model": MODEL,
        "messages": [
            {"role": "system", "content": SYSTEM_PROMPT},
            {"role": "user", "content": user_text},
        ],
        "temperature": 0.1,
    }

    for attempt in range(max_retries):
        try:
            resp = requests.post(BASE_URL, headers=headers, json=payload, timeout=30)
            
            # --- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 429 (Too Many Requests) ---
            if resp.status_code == 429:
                wait_time = 2 ** (attempt + 1)
                print(f"[-] –û—à–∏–±–∫–∞ 429 (–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤). –ü–æ–ø—ã—Ç–∫–∞ {attempt + 1}/{max_retries}. –û–∂–∏–¥–∞–Ω–∏–µ {wait_time}—Å...")
                time.sleep(wait_time)
                continue
            
            print(f"[HTTP] {resp.status_code} –û—Ç–≤–µ—Ç: {resp.text[:100]}...")
            resp.raise_for_status()

            # –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
            content = resp.json()["choices"][0]["message"]["content"].strip()
            
            # –û–∂–∏–¥–∞–µ–º JSON-–°–ü–ò–°–û–ö
            return json.loads(content)

        except requests.exceptions.RequestException as e:
            print(f"[-] –û—à–∏–±–∫–∞ HTTP-–∑–∞–ø—Ä–æ—Å–∞: {e}")
            break
        except json.JSONDecodeError as e:
            print(f"[-] –û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è JSON: {e}")
            print(f"[-] –ü–æ–ª—É—á–µ–Ω–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ: {content[:200]}...")
            # –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑ ‚Äî –¥–∞–µ–º –µ—â–µ –æ–¥–Ω—É –ø–æ–ø—ã—Ç–∫—É.
            # (–ò–Ω–æ–≥–¥–∞ AI –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON, —á—Ç–æ —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–ø–æ–ø—ã—Ç–∞—Ç—å)
            if attempt < max_retries - 1:
                print("[*] –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞...")
                continue
            break
        except Exception as e:
             print(f"[-] –ù–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ get_ai_instruction: {e}")
             break

    return None

def execute_command_list(command_list: list):
    """
    –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –∏–∑ —Å–ø–∏—Å–∫–∞ JSON-–∫–æ–º–∞–Ω–¥.
    """
    for i, command_json in enumerate(command_list):
        action = command_json.get("action")
        params = command_json.get("params", [])
        
        print(f"[*] –®–∞–≥ {i+1}/{len(command_list)}: {action} {params}")

        try:
            if action == "hotkey":
                # params –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ø–∏—Å–∫–æ–º —Å—Ç—Ä–æ–∫, e.g., ["ctrl","alt", "t"]
                pyautogui.hotkey(*params)
                
            elif action == "type":
                # params –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–∏—Å–∫–æ–º, —Å–∫–ª–µ–∏–≤–∞–µ–º –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
                text_to_type = " ".join(map(str, params))
                # –ò–Ω—Ç–µ—Ä–≤–∞–ª –∑–∞–º–µ–¥–ª—è–µ—Ç –≤–≤–æ–¥, –¥–µ–ª–∞—è –µ–≥–æ –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –¥–ª—è OS
                pyautogui.write(text_to_type, interval=0.01) 
                
            elif action == "wait":
                # params[0] - –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
                t = float(params[0]) if params and isinstance(params[0], (int, float, str)) else 1.0
                time.sleep(t)
                
            elif action == "run_shell":
                # params[0] - —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, e.g., ["firefox"] –∏–ª–∏ ["mkdir -p ~/data"]
                if params:
                    # –î–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã –≤ –û–° –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
                    command_str = " ".join(map(str, params))
                    print(f"   [RUN] –í—ã–ø–æ–ª–Ω—è—é: {command_str}")
                    # –ò—Å–ø–æ–ª—å–∑—É–µ–º subprocess.Popen –¥–ª—è –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞ 
                    # –∏–ª–∏ subprocess.run –¥–ª—è –±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ. Popen –ª—É—á—à–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
                    subprocess.Popen(command_str, shell=True) 
                    
            # --- –ù–û–í–´–ô –ë–õ–û–ö: open_url ---
            elif action == "open_url":
                # params[0] - —ç—Ç–æ URL, e.g., ["https://example.com"]
                if params:
                    url = params[0]
                    webbrowser.open(url)
                    
            # --- –ù–û–í–´–ô –ë–õ–û–ö: mouse_click ---
            elif action == "mouse_click":
                # params –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å [x, y], e.g., [100, 500]
                if len(params) >= 2:
                    x, y = params[0], params[1]
                    pyautogui.click(x, y)

            else:
                print(f"[-] –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ: {action}. –ü—Ä–æ–ø—É—Å–∫.")
        
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —à–∞–≥–∞ {i+1} ({action}): {e}. –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.")
            break


if __name__ == "__main__":
    # –í–∫–ª—é—á–∞–µ–º –∑–∞—â–∏—Ç—É –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–ª–∏–∫–æ–≤/–Ω–∞–∂–∞—Ç–∏–π
    pyautogui.FAILSAFE = True
    print("ü§ñ –ë–æ—Ç-—É–ø—Ä–∞–≤–ª–µ–Ω–µ—Ü Red OS –∑–∞–ø—É—â–µ–Ω.")
    print(f"[*] –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –º–æ–¥–µ–ª—å: {MODEL}")
    print("–í–≤–æ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: '–°–æ–∑–¥–∞–π –ø–∞–ø–∫—É data –≤ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏'). –í–≤–µ–¥–∏—Ç–µ '–≤—ã–π—Ç–∏' –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.")
    
    # --- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ü–∏–∫–ª ---
    while True:
        try:
            # 1. –ó–∞–ø—Ä–æ—Å –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            user_input = input("\n> –ß—Ç–æ –º–Ω–µ —Å–¥–µ–ª–∞—Ç—å? ")
            
            if user_input.lower() in ["–≤—ã–π—Ç–∏", "–≤—ã—Ö–æ–¥", "exit", "quit"]:
                print("üëã –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã. –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!")
                break
            
            if not user_input.strip():
                continue

            # 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –æ—Ç AI
            command_list = get_ai_instruction(user_input)

            if command_list and isinstance(command_list, list):
                print(f"[AI] –ü–æ–ª—É—á–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑ {len(command_list)} —à–∞–≥–æ–≤.")
                # –î–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—Ä–µ–º—è –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –Ω—É–∂–Ω–æ–µ –æ–∫–Ω–æ
                print("[*] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É...")
                time.sleep(1) 
                
                # 3. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥
                execute_command_list(command_list)
            else:
                print("[-] –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–º–∞–Ω–¥—É (–Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Å–ø–∏—Å–æ–∫) –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫.")

        except KeyboardInterrupt:
            # –û–±—Ä–∞–±–æ—Ç–∫–∞ Ctrl+C
            print("\nüëã –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã. –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!")
            break
        except Exception as e:
            print(f"‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ü–∏–∫–ª–µ: {e}")
            time.sleep(1) 
            continue

        except KeyboardInterrupt:
            print("\nüëã –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º")
            break
        except Exception as e:
            print(f"‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")
            time.sleep(2)

if __name__ == "__main__":
    main()

